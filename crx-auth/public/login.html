<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CRX - Login</title>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
  background: #0a0a0a;
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 20px;
  position: relative;
  overflow: hidden;
}

.bg-grid {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: 
    linear-gradient(rgba(99, 102, 241, 0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(99, 102, 241, 0.03) 1px, transparent 1px);
  background-size: 50px 50px;
  z-index: 0;
}

.glow {
  position: fixed;
  width: 600px;
  height: 600px;
  background: radial-gradient(circle, rgba(99, 102, 241, 0.15) 0%, transparent 70%);
  border-radius: 50%;
  filter: blur(80px);
  animation: float 20s infinite alternate;
  z-index: 0;
}

.glow:nth-child(2) {
  background: radial-gradient(circle, rgba(139, 92, 246, 0.15) 0%, transparent 70%);
  top: 60%;
  left: 70%;
  animation-delay: -10s;
}

@keyframes float {
  0% { transform: translate(0, 0); }
  100% { transform: translate(100px, 100px); }
}

.container {
  background: rgba(18, 18, 18, 0.8);
  backdrop-filter: blur(20px);
  border: 1px solid rgba(99, 102, 241, 0.1);
  border-radius: 16px;
  width: 100%;
  max-width: 420px;
  padding: 48px 40px;
  position: relative;
  z-index: 10;
}

.logo-section {
  text-align: center;
  margin-bottom: 40px;
}

.logo {
  width: 56px;
  height: 56px;
  margin: 0 auto 16px;
  background: url("earning\ ap\ .jpeg");
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
  font-weight: 700;
  color: white;
  letter-spacing: 1px;
}

.brand {
  font-size: 24px;
  font-weight: 600;
  color: #fff;
  margin-bottom: 4px;
  letter-spacing: 0.5px;
}

.tagline {
  color: #888;
  font-size: 13px;
  font-weight: 400;
}

h2 {
  color: #fff;
  margin-bottom: 32px;
  font-size: 20px;
  font-weight: 500;
  text-align: center;
}

.input-group {
  margin-bottom: 20px;
}

.input-group label {
  display: block;
  color: #aaa;
  font-size: 13px;
  font-weight: 500;
  margin-bottom: 8px;
  letter-spacing: 0.3px;
}

.input-group input {
  width: 100%;
  padding: 12px 16px;
  background: rgba(30, 30, 30, 0.6);
  border: 1px solid rgba(99, 102, 241, 0.2);
  border-radius: 8px;
  font-size: 14px;
  color: #fff;
  transition: all 0.2s;
}

.input-group input:focus {
  outline: none;
  border-color: #6366f1;
  background: rgba(30, 30, 30, 0.8);
}

.input-group input::placeholder {
  color: #555;
}

button {
  width: 100%;
  padding: 13px;
  background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  margin-top: 8px;
  letter-spacing: 0.3px;
}

button:hover {
  transform: translateY(-1px);
  box-shadow: 0 8px 24px rgba(99, 102, 241, 0.3);
}

button:active {
  transform: translateY(0);
}

button:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.forgot-link {
  text-align: right;
  margin-top: 12px;
}

.forgot-link a {
  color: #6366f1;
  text-decoration: none;
  font-size: 13px;
  font-weight: 500;
  transition: color 0.2s;
}

.forgot-link a:hover {
  color: #8b5cf6;
}

#msg {
  color: #ef4444;
  font-size: 13px;
  text-align: center;
  margin-top: 16px;
  padding: 10px;
  border-radius: 6px;
  background: rgba(239, 68, 68, 0.1);
  border: 1px solid rgba(239, 68, 68, 0.2);
  display: none;
}

#msg.show {
  display: block;
}

#msg.success {
  color: #10b981;
  background: rgba(16, 185, 129, 0.1);
  border-color: rgba(16, 185, 129, 0.2);
}

.divider {
  display: flex;
  align-items: center;
  margin: 32px 0 24px;
  color: #555;
  font-size: 12px;
}

.divider::before,
.divider::after {
  content: '';
  flex: 1;
  border-bottom: 1px solid rgba(99, 102, 241, 0.1);
}

.divider span {
  padding: 0 16px;
}

.register-link {
  text-align: center;
  color: #888;
  font-size: 13px;
}

.register-link a {
  color: #6366f1;
  text-decoration: none;
  font-weight: 600;
  transition: color 0.2s;
}

.register-link a:hover {
  color: #8b5cf6;
}

.support-btn {
  position: fixed;
  bottom: 24px;
  right: 24px;
  width: 54px;
  height: 54px;
  background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 22px;
  cursor: pointer;
  box-shadow: 0 4px 16px rgba(99, 102, 241, 0.4);
  transition: all 0.2s;
  z-index: 1000;
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.support-btn:hover {
  transform: scale(1.05);
  box-shadow: 0 6px 24px rgba(99, 102, 241, 0.5);
}

.support-modal {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.8);
  z-index: 2000;
  justify-content: center;
  align-items: center;
  backdrop-filter: blur(8px);
}

.support-modal.active {
  display: flex;
}

.support-content {
  background: rgba(18, 18, 18, 0.95);
  border: 1px solid rgba(99, 102, 241, 0.2);
  border-radius: 16px;
  padding: 32px;
  max-width: 450px;
  width: 90%;
  position: relative;
}

.close-btn {
  position: absolute;
  top: 16px;
  right: 20px;
  font-size: 24px;
  cursor: pointer;
  color: #666;
  transition: color 0.2s;
  line-height: 1;
}

.close-btn:hover {
  color: #fff;
}

.support-content h3 {
  color: #fff;
  margin-bottom: 8px;
  font-size: 20px;
  font-weight: 600;
}

.support-content p {
  color: #888;
  margin-bottom: 24px;
  font-size: 14px;
}

.support-option {
  display: flex;
  align-items: center;
  padding: 16px;
  margin-bottom: 10px;
  background: rgba(30, 30, 30, 0.6);
  border: 1px solid rgba(99, 102, 241, 0.1);
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.2s;
}

.support-option:hover {
  background: rgba(40, 40, 40, 0.8);
  border-color: rgba(99, 102, 241, 0.3);
  transform: translateX(4px);
}

.support-option span {
  font-size: 22px;
  margin-right: 16px;
}

.support-option strong {
  color: #fff;
  font-size: 14px;
  font-weight: 600;
  display: block;
  margin-bottom: 2px;
}

.support-option small {
  color: #888;
  font-size: 12px;
}

@media (max-width: 480px) {
  .container {
    padding: 36px 24px;
  }
  
  .logo {
    width: 48px;
    height: 48px;
    font-size: 20px;
  }
  
  .brand {
    font-size: 20px;
  }
  
  h2 {
    font-size: 18px;
  }
  
  .support-btn {
    width: 48px;
    height: 48px;
    bottom: 20px;
    right: 20px;
    font-size: 20px;
  }
  
  .support-content {
    padding: 24px;
  }
}
</style>
</head>
<body>
<div class="bg-grid"></div>
<div class="glow" style="top: 20%; left: 10%;"></div>
<div class="glow"></div>

<div class="container">
  <div class="logo-section">
    <div class="logo">CRX</div>
    <div class="brand">CRX System</div>
    <div class="tagline">Secure Authentication</div>
  </div>
  
  <h2>Welcome Back</h2>
  
  <form id="loginForm">
    <div class="input-group">
      <label>Email / Username / Phone</label>
      <input type="text" name="identifier" placeholder="Enter your credentials" required>
    </div>
    
    <div class="input-group">
      <label>Password</label>
      <input type="password" name="password" placeholder="Enter your password" required>
    </div>
    
    <button type="submit">Sign In</button>
    
    <div class="forgot-link">
      <a href="forgot.html">Forgot Password?</a>
    </div>
    
    <p id="msg"></p>
    
    <div class="divider">
      <span>New to CRX?</span>
    </div>
    
    <div class="register-link">
      <a href="register.html">Create an account â†’</a>
    </div>
  </form>
</div>

<div class="support-btn" onclick="toggleSupport()">ðŸ’¬</div>

<div class="support-modal" id="supportModal">
  <div class="support-content">
    <span class="close-btn" onclick="toggleSupport()">&times;</span>
    <h3>Need Help?</h3>
    <p>Our support team is available 24/7</p>
    
    <div class="support-options">
      <div class="support-option" onclick="alert('Live Chat - Coming Soon!')">
        <span>ðŸ’¬</span>
        <div>
          <strong>Live Chat</strong>
          <small>Instant support</small>
        </div>
      </div>
      
      <div class="support-option" onclick="alert('Email: support@crxsystem.com')">
        <span>ðŸ“§</span>
        <div>
          <strong>Email Support</strong>
          <small>support@crxsystem.com</small>
        </div>
      </div>
      
      <div class="support-option" onclick="alert('Help Center - Coming Soon!')">
        <span>ðŸ“š</span>
        <div>
          <strong>Help Center</strong>
          <small>FAQs & Guides</small>
        </div>
      </div>
      
      <div class="support-option" onclick="alert('Phone: +92-XXX-XXXXXXX')">
        <span>ðŸ“ž</span>
        <div>
          <strong>Phone Support</strong>
          <small>+92-XXX-XXXXXXX</small>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
function toggleSupport() {
  document.getElementById('supportModal').classList.toggle('active');
}

document.getElementById('supportModal').addEventListener('click', function(e) {
  if (e.target === this) toggleSupport();
});

document.getElementById('loginForm').addEventListener('submit', async(e) => {
  e.preventDefault();
  const data = Object.fromEntries(new FormData(e.target));
  const msgEl = document.getElementById('msg');
  const btn = e.target.querySelector('button');
  const originalText = btn.textContent;
  
  btn.textContent = 'Signing In...';
  btn.disabled = true;
  msgEl.classList.remove('show', 'success');
  
  try {
    const res = await fetch('/api/auth/login', {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify(data)
    });
    const result = await res.json();
    
    if(result.token) {
      sessionStorage.setItem('token', result.token);
      msgEl.textContent = 'âœ“ Login successful! Redirecting...';
      msgEl.classList.add('show', 'success');
      setTimeout(() => window.location.href = 'dashboard.html', 1000);
    } else {
      msgEl.textContent = result.message || 'âœ— Invalid credentials';
      msgEl.classList.add('show');
      btn.textContent = originalText;
      btn.disabled = false;
    }
  } catch(err) {
    msgEl.textContent = 'âœ— Server error. Please try again.';
    msgEl.classList.add('show');
    btn.textContent = originalText;
    btn.disabled = false;
  }
});
</script>
</body>
</html>