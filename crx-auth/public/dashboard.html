<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CRX Earning - Dashboard</title>
<style>
:root {
  --bg-primary: #ffffff;
  --bg-secondary: #f8f9fa;
  --bg-tertiary: #f1f3f5;
  --text-primary: #0f172a;
  --text-secondary: #64748b;
  --text-tertiary: #94a3b8;
  --border-color: #e2e8f0;
  --accent-primary: #6366f1;
  --accent-secondary: #8b5cf6;
  --success: #10b981;
  --warning: #f59e0b;
  --card-shadow: 0 1px 3px rgba(0,0,0,0.04);
  --card-hover-shadow: 0 4px 12px rgba(0,0,0,0.08);
}

[data-theme="dark"] {
  --bg-primary: #0f172a;
  --bg-secondary: #1e293b;
  --bg-tertiary: #334155;
  --text-primary: #f1f5f9;
  --text-secondary: #cbd5e1;
  --text-tertiary: #94a3b8;
  --border-color: #334155;
  --card-shadow: 0 1px 3px rgba(0,0,0,0.2);
  --card-hover-shadow: 0 4px 12px rgba(0,0,0,0.3);
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  background: var(--bg-secondary);
  color: var(--text-primary);
  transition: all 0.3s ease;
  line-height: 1.6;
}

.main-layout {
  display: flex;
  min-height: 100vh;
}

.main-content-wrapper {
  flex: 1;
  display: flex;
  flex-direction: column;
}

.container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 20px;
}

/* Header */
.header {
  background: var(--bg-primary);
  border-bottom: 1px solid var(--border-color);
  padding: 16px 0;
  position: sticky;
  top: 0;
  z-index: 100;
  backdrop-filter: blur(10px);
}

.header-content {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.logo-section {
  display: flex;
  align-items: center;
  gap: 12px;
}

.logo {
  width: 42px;
  height: 42px;
  background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

.logo img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.brand-name {
  font-size: 20px;
  font-weight: 700;
  background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.header-actions {
  display: flex;
  align-items: center;
  gap: 12px;
}

.theme-toggle, .notification-btn {
  width: 42px;
  height: 42px;
  border-radius: 10px;
  background: var(--bg-secondary);
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
  position: relative;
}

.theme-toggle:hover, .notification-btn:hover {
  transform: translateY(-2px);
  box-shadow: var(--card-hover-shadow);
}

.theme-toggle svg, .notification-btn svg {
  width: 20px;
  height: 20px;
  stroke: var(--text-secondary);
}

/* Notification Popup */
.notification-popup {
  display: none;
  position: fixed;
  top: 70px;
  right: 20px;
  background: var(--bg-primary);
  border-radius: 12px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.12);
  padding: 20px;
  z-index: 200;
  min-width: 300px;
  border: 1px solid var(--border-color);
  animation: slideDown 0.3s ease;
}

.notification-popup.active {
  display: block;
}

@keyframes slideDown {
  from { 
    opacity: 0; 
    transform: translateY(-10px); 
  }
  to { 
    opacity: 1; 
    transform: translateY(0); 
  }
}

.notification-popup h3 {
  font-size: 16px;
  margin-bottom: 12px;
  color: var(--text-primary);
  font-weight: 600;
}

.notification-popup p {
  font-size: 14px;
  color: var(--text-secondary);
  line-height: 1.5;
}

/* Welcome Section */
.welcome-section {
  background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
  padding: 48px 0;
  margin-bottom: 32px;
  border-radius: 0 0 24px 24px;
}

.welcome-content h1 {
  font-size: 32px;
  color: #fff;
  margin-bottom: 8px;
}

.welcome-content p {
  font-size: 16px;
  color: rgba(255,255,255,0.9);
}

/* Stats Cards */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 20px;
  margin-bottom: 40px;
}

.stat-card {
  background: var(--bg-primary);
  border-radius: 16px;
  padding: 24px;
  box-shadow: var(--card-shadow);
  cursor: pointer;
  transition: all 0.3s;
  border: 1px solid var(--border-color);
}

.stat-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--card-hover-shadow);
}

.stat-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
}

.stat-title {
  font-size: 14px;
  color: var(--text-secondary);
  font-weight: 500;
}

.stat-badge {
  padding: 4px 12px;
  border-radius: 20px;
  font-size: 11px;
  font-weight: 600;
}

.stat-badge.active {
  background: #d1fae5;
  color: #065f46;
}

.stat-badge.inactive {
  background: #fee2e2;
  color: #991b1b;
}

[data-theme="dark"] .stat-badge.active {
  background: #064e3b;
  color: #6ee7b7;
}

[data-theme="dark"] .stat-badge.inactive {
  background: #7f1d1d;
  color: #fca5a5;
}

.stat-value {
  font-size: 32px;
  font-weight: 700;
  margin-bottom: 8px;
  color: var(--text-primary);
}

.stat-subtitle {
  font-size: 13px;
  color: var(--text-secondary);
}

.stat-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 12px;
}

.ref-code {
  font-size: 12px;
  color: var(--accent-primary);
  background: rgba(99, 102, 241, 0.1);
  padding: 6px 12px;
  border-radius: 8px;
  font-weight: 600;
}

/* Section */
.section {
  margin-bottom: 48px;
}

.section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
}

.section-title {
  font-size: 24px;
  font-weight: 700;
}

.section-subtitle {
  font-size: 14px;
  color: var(--text-secondary);
  margin-top: 4px;
}

/* Withdrawals */
.withdrawals-card {
  background: var(--bg-primary);
  border-radius: 16px;
  padding: 20px;
  box-shadow: var(--card-shadow);
  border: 1px solid var(--border-color);
}

.withdrawals-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
}

.live-indicator {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  color: var(--success);
  font-weight: 600;
  padding: 4px 10px;
  background: rgba(16, 185, 129, 0.1);
  border-radius: 20px;
  animation: fadeIn 0.5s ease;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-5px); }
  to { opacity: 1; transform: translateY(0); }
}

.live-dot {
  width: 8px;
  height: 8px;
  background: var(--success);
  border-radius: 50%;
  position: relative;
  animation: pulse 2s infinite;
}

.live-dot::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 100%;
  height: 100%;
  background: var(--success);
  border-radius: 50%;
  animation: ripple 2s infinite;
}

@keyframes pulse {
  0%, 100% { 
    opacity: 1;
    transform: scale(1);
  }
  50% { 
    opacity: 0.7;
    transform: scale(0.95);
  }
}

@keyframes ripple {
  0% {
    width: 100%;
    height: 100%;
    opacity: 0.8;
  }
  100% {
    width: 200%;
    height: 200%;
    opacity: 0;
  }
}

.withdrawals-scroll {
  height: 100px;
  overflow: hidden;
  position: relative;
}

.withdrawal-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 0;
  border-bottom: 1px solid var(--border-color);
  animation: scrollUp 20s linear infinite;
}

@keyframes scrollUp {
  0% { transform: translateY(0); }
  100% { transform: translateY(-100%); }
}

.withdrawal-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
  display: flex;
  align-items: center;
  justify-content: center;
  color: #fff;
  font-weight: 600;
  font-size: 14px;
  flex-shrink: 0;
}

.withdrawal-info {
  flex: 1;
  min-width: 0;
}

.withdrawal-email {
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.withdrawal-time {
  font-size: 11px;
  color: var(--text-secondary);
}

.withdrawal-amount {
  font-size: 14px;
  font-weight: 700;
  color: var(--success);
  flex-shrink: 0;
}

/* Plans Grid */
.plans-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 20px;
}

.plan-card {
  background: var(--bg-primary);
  border-radius: 16px;
  padding: 20px;
  box-shadow: var(--card-shadow);
  cursor: pointer;
  transition: all 0.3s ease;
  border: 1px solid var(--border-color);
  text-align: center;
  position: relative;
  overflow: hidden;
}

.plan-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(99, 102, 241, 0.1), transparent);
  transition: left 0.5s;
}

.plan-card:hover::before {
  left: 100%;
}

.plan-card:hover {
  transform: translateY(-8px) scale(1.02);
  box-shadow: var(--card-hover-shadow);
  border-color: var(--accent-primary);
}

.plan-card:active {
  transform: translateY(-4px) scale(1);
}

.plan-card img {
  width: 60px;
  height: 60px;
  border-radius: 12px;
  margin: 0 auto 12px;
  object-fit: cover;
  transition: transform 0.3s ease;
}

.plan-card:hover img {
  transform: scale(1.1) rotate(5deg);
}

.plan-name {
  font-size: 16px;
  font-weight: 700;
  margin-bottom: 8px;
  transition: color 0.3s;
}

.plan-card:hover .plan-name {
  color: var(--accent-primary);
}

.plan-price {
  font-size: 24px;
  font-weight: 700;
  color: var(--accent-primary);
  margin: 10px 0;
}

.plan-detail {
  font-size: 12px;
  color: var(--text-secondary);
  margin: 4px 0;
}

/* Coming Soon */
.coming-soon-card {
  background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.1));
  border-radius: 16px;
  padding: 48px 24px;
  text-align: center;
  border: 1px solid var(--border-color);
}

.coming-soon-icon {
  font-size: 64px;
  margin-bottom: 16px;
}

.coming-soon-card h3 {
  font-size: 24px;
  margin-bottom: 8px;
}

.coming-soon-card p {
  color: var(--text-secondary);
  font-size: 14px;
}

/* Support */
.support-card {
  background: var(--bg-primary);
  border-radius: 16px;
  padding: 32px;
  box-shadow: var(--card-shadow);
  border: 1px solid var(--border-color);
  text-align: center;
}

.support-icon {
  width: 64px;
  height: 64px;
  margin: 0 auto 20px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
  display: flex;
  align-items: center;
  justify-content: center;
}

.support-icon svg {
  width: 32px;
  height: 32px;
  stroke: #fff;
}

.support-card h3 {
  font-size: 20px;
  margin-bottom: 8px;
}

.support-card p {
  color: var(--text-secondary);
  margin-bottom: 20px;
}

.support-btn {
  background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
  color: #fff;
  border: none;
  padding: 12px 32px;
  border-radius: 10px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
}

.support-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
}

/* FAQ Accordion */
.faq-accordion {
  background: var(--bg-primary);
  border-radius: 16px;
  overflow: hidden;
  box-shadow: var(--card-shadow);
  border: 1px solid var(--border-color);
}

.faq-item {
  border-bottom: 1px solid var(--border-color);
}

.faq-item:last-child {
  border-bottom: none;
}

.faq-question {
  padding: 20px 24px;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
  transition: all 0.3s;
  background: var(--bg-primary);
}

.faq-question:hover {
  background: var(--bg-secondary);
}

.faq-question h4 {
  font-size: 15px;
  font-weight: 600;
  flex: 1;
}

.faq-icon {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: var(--bg-secondary);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform 0.3s;
}

.faq-item.active .faq-icon {
  transform: rotate(180deg);
  background: var(--accent-primary);
}

.faq-item.active .faq-icon svg {
  stroke: #fff;
}

.faq-icon svg {
  width: 16px;
  height: 16px;
  stroke: var(--text-secondary);
}

.faq-answer {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.3s ease;
}

.faq-answer-content {
  padding: 0 24px 20px 24px;
  color: var(--text-secondary);
  font-size: 14px;
  line-height: 1.7;
}

/* Logout Button */
.logout-section {
  margin: 48px 0;
  text-align: center;
}

.logout-btn {
  background: transparent;
  border: 2px solid #fee2e2;
  color: #dc2626;
  padding: 14px 40px;
  border-radius: 12px;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
}

.logout-btn::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  background: #dc2626;
  border-radius: 50%;
  transform: translate(-50%, -50%);
  transition: width 0.4s ease, height 0.4s ease;
}

.logout-btn:hover::before {
  width: 300px;
  height: 300px;
}

.logout-btn:hover {
  border-color: #dc2626;
  color: #fff;
  transform: translateY(-3px);
  box-shadow: 0 8px 20px rgba(220, 38, 38, 0.3);
}

.logout-btn span {
  position: relative;
  z-index: 1;
}

.logout-btn:active {
  transform: translateY(-1px);
}

/* Bottom Nav - Mobile */
.bottom-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: var(--bg-primary);
  border-top: 1px solid var(--border-color);
  display: flex;
  justify-content: space-around;
  padding: 12px 0;
  z-index: 100;
}

.nav-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  cursor: pointer;
  color: var(--text-tertiary);
  transition: all 0.2s;
  padding: 4px 8px;
  flex: 1;
  max-width: 80px;
}

.nav-item.active {
  color: var(--accent-primary);
}

.nav-item svg {
  width: 22px;
  height: 22px;
  stroke: currentColor;
}

.nav-item span {
  font-size: 11px;
  font-weight: 500;
}

/* Desktop Navigation */
.desktop-nav {
  display: none;
}

/* Desktop Sidebar */
.desktop-sidebar {
  display: none;
}

@media (min-width: 769px) {
  .desktop-sidebar {
    display: flex;
    flex-direction: column;
    width: 280px;
    background: var(--bg-primary);
    border-right: 1px solid var(--border-color);
    padding: 24px 0;
    position: fixed;
    left: 0;
    top: 0;
    bottom: 0;
    z-index: 99;
    overflow-y: auto;
  }

  .sidebar-logo {
    padding: 0 24px 24px;
    border-bottom: 1px solid var(--border-color);
    margin-bottom: 24px;
  }

  .sidebar-logo-content {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .sidebar-logo .logo {
    width: 48px;
    height: 48px;
    background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
  }

  .sidebar-logo .logo img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .sidebar-logo .brand-name {
    font-size: 20px;
    font-weight: 700;
    background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .sidebar-nav {
    flex: 1;
    padding: 0 16px;
  }

  .sidebar-nav-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 14px 16px;
    border-radius: 12px;
    cursor: pointer;
    color: var(--text-secondary);
    transition: all 0.3s ease;
    font-size: 15px;
    font-weight: 500;
    background: transparent;
    border: none;
    width: 100%;
    margin-bottom: 6px;
    text-align: left;
  }

  .sidebar-nav-item:hover {
    background: var(--bg-secondary);
    color: var(--text-primary);
    transform: translateX(4px);
  }

  .sidebar-nav-item.active {
    background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
    color: #fff;
    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
  }

  .sidebar-nav-item svg {
    width: 22px;
    height: 22px;
    stroke: currentColor;
    flex-shrink: 0;
  }

  .sidebar-footer {
    padding: 24px 16px 0;
    border-top: 1px solid var(--border-color);
    margin-top: 24px;
  }

  .main-content-wrapper {
    margin-left: 280px;
  }
}

/* Loading Skeleton */
.skeleton {
  animation: skeleton-loading 1.5s ease-in-out infinite;
  border-radius: 8px;
}

@keyframes skeleton-loading {
  0% {
    background-color: var(--bg-secondary);
  }
  50% {
    background-color: var(--bg-tertiary);
  }
  100% {
    background-color: var(--bg-secondary);
  }
}

.skeleton-text {
  height: 20px;
  margin: 10px 0;
}

.skeleton-title {
  height: 32px;
  width: 60%;
  margin: 16px 0;
}

.skeleton-card {
  background: var(--bg-primary);
  border-radius: 16px;
  padding: 24px;
  box-shadow: var(--card-shadow);
  border: 1px solid var(--border-color);
}

.skeleton-header {
  height: 16px;
  width: 40%;
  margin-bottom: 20px;
}

.skeleton-value {
  height: 36px;
  width: 50%;
  margin-bottom: 12px;
}

.skeleton-subtitle {
  height: 14px;
  width: 60%;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.hidden {
  display: none;
}

/* Responsive */
@media (max-width: 768px) {
  body {
    padding-bottom: 70px;
  }

  .welcome-section {
    padding: 32px 0;
  }

  .welcome-content h1 {
    font-size: 24px;
  }

  .section-title {
    font-size: 20px;
  }

  .stats-grid {
    grid-template-columns: 1fr;
  }

  .plans-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
  }
}

@media (min-width: 769px) {
  body {
    padding-bottom: 0;
  }

  .container {
    max-width: 1200px;
  }

  .welcome-section {
    padding: 48px 0;
    margin-bottom: 40px;
  }

  .welcome-content h1 {
    font-size: 36px;
  }

  .welcome-content p {
    font-size: 18px;
  }

  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 24px;
  }

  .stat-card {
    padding: 28px;
  }

  .stat-value {
    font-size: 36px;
  }

  .plans-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 24px;
  }

  .plan-card {
    padding: 28px 24px;
  }

  .plan-card img {
    width: 70px;
    height: 70px;
  }

  .plan-name {
    font-size: 18px;
  }

  .plan-price {
    font-size: 28px;
  }

  .plan-detail {
    font-size: 13px;
  }

  .withdrawals-card {
    padding: 28px;
  }

  .withdrawals-scroll {
    height: 120px;
  }

  .coming-soon-card {
    padding: 64px 32px;
  }

  .coming-soon-icon {
    font-size: 80px;
  }

  .support-card {
    padding: 48px;
  }

  .section {
    margin-bottom: 64px;
  }

  .bottom-nav {
    display: none;
  }
}
</style>
</head>
<body>

<!-- Desktop Sidebar -->
<div class="desktop-sidebar">
  <div class="sidebar-logo">
    <div class="sidebar-logo-content">
      <div class="logo">
        <img src="../images/earn.jpeg" alt="CRX Logo" id="sidebarLogoImg">
      </div>
      <div class="brand-name">CRX</div>
    </div>
  </div>

  <div class="sidebar-nav">
    <button class="sidebar-nav-item active">
      <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
      </svg>
      <span>Home</span>
    </button>
    <button class="sidebar-nav-item" onclick="window.location.href='plan.html'">
      <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
      </svg>
      <span>Plans</span>
    </button>
    <button class="sidebar-nav-item" onclick="window.location.href='task.html'">
      <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path>
      </svg>
      <span>Tasks</span>
    </button>
    <button class="sidebar-nav-item" onclick="window.location.href='withdraw.html'">
      <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"></path>
      </svg>
      <span>Withdraw</span>
    </button>
    <button class="sidebar-nav-item" onclick="window.location.href='referral.html'">
      <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
      </svg>
      <span>Referral</span>
    </button>
    <button class="sidebar-nav-item" onclick="window.location.href='profile.html'">
      <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
      </svg>
      <span>Profile</span>
    </button>
  </div>

  <div class="sidebar-footer">
    <button class="sidebar-nav-item" onclick="window.location.href='support.html'">
      <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"></path>
      </svg>
      <span>Support</span>
    </button>
  </div>
</div>

<div class="main-layout">
  <div class="main-content-wrapper">

<!-- Header -->
<div class="header">
  <div class="container">
    <div class="header-content">
      <div class="logo-section">
        <div class="logo">
          <img src="../images/earn.jpeg" alt="CRX Logo" id="headerLogoImg">
        </div>
        <div class="brand-name">CRX</div>
      </div>

      <div class="header-actions">
        <button class="theme-toggle" onclick="toggleTheme()">
          <svg id="themeIcon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
          </svg>
        </button>
        <button class="notification-btn" onclick="toggleNotification()">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
          </svg>
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Notification Popup -->
<div class="notification-popup" id="notificationPopup">
  <h3>Notifications</h3>
  <p id="notificationMessage">Buy a plan to start earning money!</p>
</div>

<!-- Welcome Section -->
<div class="welcome-section">
  <div class="container">
    <div class="welcome-content">
      <h1>Welcome back, <span id="userName">User</span> 👋</h1>
      <p>Track your earnings, manage plans, and grow your income.</p>
    </div>
  </div>
</div>

<!-- Main Content -->
<div class="container">
  
  <!-- Loading Skeleton -->
  <div id="loadingSkeleton">
    <div class="stats-grid">
      <div class="skeleton-card">
        <div class="skeleton skeleton-header"></div>
        <div class="skeleton skeleton-value"></div>
        <div class="skeleton skeleton-subtitle"></div>
      </div>
      <div class="skeleton-card">
        <div class="skeleton skeleton-header"></div>
        <div class="skeleton skeleton-value"></div>
        <div class="skeleton skeleton-subtitle"></div>
      </div>
      <div class="skeleton-card">
        <div class="skeleton skeleton-header"></div>
        <div class="skeleton skeleton-value"></div>
        <div class="skeleton skeleton-subtitle"></div>
      </div>
    </div>
  </div>

  <!-- Stats Cards -->
  <div id="mainContent" class="hidden">
    <div class="stats-grid">
      <div class="stat-card" onclick="window.location.href='withdraw.html'">
        <div class="stat-header">
          <div class="stat-title">Wallet Balance</div>
        </div>
        <div class="stat-value">$<span id="walletBalance">0.00</span></div>
        <div class="stat-subtitle">Available for withdrawal</div>
      </div>

      <div class="stat-card" onclick="window.location.href='plan.html'">
        <div class="stat-header">
          <div class="stat-title">Active Plan</div>
          <span class="stat-badge inactive" id="planStatus">Inactive</span>
        </div>
        <div class="stat-value" id="planName" style="font-size: 24px;">No Plan</div>
        <div class="stat-subtitle" id="planExpiry">Purchase a plan to start</div>
      </div>

      <div class="stat-card" onclick="window.location.href='referral.html'">
        <div class="stat-header">
          <div class="stat-title">Referrals</div>
        </div>
        <div class="stat-value" id="referralCount">0</div>
        <div class="stat-footer">
          <div class="stat-subtitle">Your Code</div>
          <div class="ref-code" id="referralCode">-</div>
        </div>
      </div>
    </div>

    <!-- Recent Withdrawals -->
    <div class="section">
      <div class="section-header">
        <div>
          <h2 class="section-title">Recent Withdrawals</h2>
          <p class="section-subtitle">Live transactions from our community</p>
        </div>
      </div>
      <div class="withdrawals-card">
        <div class="withdrawals-header">
          <h3 style="font-size: 15px; font-weight: 600;">Latest Payouts</h3>
          <div class="live-indicator">
            <div class="live-dot"></div>
            <span>LIVE</span>
          </div>
        </div>
        <div class="withdrawals-scroll" id="withdrawalsList"></div>
      </div>
    </div>

    <!-- Popular Plans -->
    <div class="section">
      <div class="section-header">
        <div>
          <h2 class="section-title">Investment Plans</h2>
          <p class="section-subtitle">Choose the perfect plan for your goals</p>
        </div>
      </div>
      <div class="plans-grid" id="plansGrid"></div>
    </div>

    <!-- Coming Soon App -->
    <div class="section">
      <div class="section-header">
        <div>
          <h2 class="section-title">Mobile App</h2>
          <p class="section-subtitle">Coming soon to iOS & Android</p>
        </div>
      </div>
      <div class="coming-soon-card">
        <div class="coming-soon-icon">📱</div>
        <h3>CRX Mobile App</h3>
        <p>Manage your earnings on the go. Stay tuned for the launch!</p>
      </div>
    </div>

    <!-- Need Help -->
    <div class="section">
      <div class="section-header">
        <div>
          <h2 class="section-title">Need Help?</h2>
          <p class="section-subtitle">Our support team is here for you</p>
        </div>
      </div>
      <div class="support-card">
        <div class="support-icon">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"></path>
          </svg>
        </div>
        <h3>24/7 Support Available</h3>
        <p>Get instant help from our dedicated support team</p>
        <button class="support-btn" onclick="window.location.href='support.html'">Contact Support</button>
      </div>
    </div>

    <!-- Trust & FAQs -->
    <div class="section">
      <div class="section-header">
        <div>
          <h2 class="section-title">Trusted Platform</h2>
          <p class="section-subtitle">Frequently asked questions</p>
        </div>
      </div>
      <div class="faq-accordion">
        <div class="faq-item">
          <div class="faq-question" onclick="toggleFaq(this)">
            <h4>🟢 How does CRX earning system work?</h4>
            <div class="faq-icon">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </div>
          </div>
          <div class="faq-answer">
            <div class="faq-answer-content">
              After purchasing a plan, you'll get daily ads or tasks to complete. Each completed task adds profit to your account according to your plan. You can track your daily income and withdraw it once you reach the minimum withdrawal limit.
            </div>
          </div>
        </div>

        <div class="faq-item">
          <div class="faq-question" onclick="toggleFaq(this)">
            <h4>🟢 When will my plan be activated after payment?</h4>
            <div class="faq-icon">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </div>
          </div>
          <div class="faq-answer">
            <div class="faq-answer-content">
              After you upload your payment proof, the admin reviews and approves your plan within 24 hours (usually sooner). Once approved, your plan activates automatically and your daily tasks start appearing.
            </div>
          </div>
        </div>

        <div class="faq-item">
          <div class="faq-question" onclick="toggleFaq(this)">
            <h4>🟢 How does the referral system work?</h4>
            <div class="faq-icon">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </div>
          </div>
          <div class="faq-answer">
            <div class="faq-answer-content">
              You'll get a unique referral code. When someone registers using your code and activates a plan, you'll earn 1 referral count. For every 5 successful referrals, you can claim a $1 bonus from your referral dashboard.
            </div>
          </div>
        </div>

        <div class="faq-item">
          <div class="faq-question" onclick="toggleFaq(this)">
            <h4>🟢 How can I withdraw my earnings?</h4>
            <div class="faq-icon">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </div>
          </div>
          <div class="faq-answer">
            <div class="faq-answer-content">
              Once your wallet balance reaches the minimum withdrawal limit, you can submit a withdrawal request. Admin reviews it and transfers the amount to your provided account within 12–24 hours.
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Logout -->
    <div class="logout-section">
      <button class="logout-btn" onclick="logout()"><span>Logout</span></button>
    </div>
  </div>
</div>

</div>

<!-- Bottom Navigation -->
<div class="bottom-nav">
  <div class="nav-item active">
    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
    </svg>
    <span>Home</span>
  </div>

  <div class="nav-item" onclick="window.location.href='plan.html'">
    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
    </svg>
    <span>Plans</span>
  </div>

  <div class="nav-item" onclick="window.location.href='task.html'">
    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path>
    </svg>
    <span>Tasks</span>
  </div>

  <div class="nav-item" onclick="window.location.href='withdraw.html'">
    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"></path>
    </svg>
    <span>Withdraw</span>
  </div>

  <div class="nav-item" onclick="window.location.href='referral.html'">
    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
    </svg>
    <span>Referral</span>
  </div>

  <div class="nav-item" onclick="window.location.href='profile.html'">
    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
    </svg>
    <span>Profile</span>
  </div>
</div>

<script>
const plans = [
  { name: "Bitcoin", image: "../images/bitcoin.jfif", totalInvestment: 20, dailyAds: 4, dailyProfit: 2, totalProfit: 180, durationDays: 65 },
  { name: "Ethereum", image: "../images/Ethereum.jfif", totalInvestment: 50, dailyAds: 10, dailyProfit: 8, totalProfit: 480, durationDays: 65 },
  { name: "Tether", image: "../images/Tether.net", totalInvestment: 100, dailyAds: 20, dailyProfit: 16, totalProfit: 960, durationDays: 65 },
  { name: "BNB", image: "../images/BNB.jfif", totalInvestment: 200, dailyAds: 40, dailyProfit: 32, totalProfit: 1920, durationDays: 65 }
];

const withdrawals = [
  { user: "john***23", email: "jo***@gmail.com", amount: 450 },
  { user: "sarah***89", email: "sa***@gmail.com", amount: 120 },
  { user: "mike***45", email: "mi***@gmail.com", amount: 280 },
  { user: "emma***12", email: "em***@gmail.com", amount: 350 },
  { user: "alex***67", email: "al***@gmail.com", amount: 190 },
  { user: "david***34", email: "da***@gmail.com", amount: 520 },
  { user: "lisa***78", email: "li***@gmail.com", amount: 240 },
  { user: "mark***56", email: "ma***@gmail.com", amount: 380 }
];

// Theme Toggle
function toggleTheme() {
  const html = document.documentElement;
  const currentTheme = html.getAttribute('data-theme');
  const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
  html.setAttribute('data-theme', newTheme);
  localStorage.setItem('theme', newTheme);
  
  const icon = document.getElementById('themeIcon');
  if (newTheme === 'dark') {
    icon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>';
  } else {
    icon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>';
  }
}

// Notification Toggle
function toggleNotification() {
  const popup = document.getElementById('notificationPopup');
  popup.classList.toggle('active');
}

// Close notification when clicking outside
document.addEventListener('click', function(e) {
  const popup = document.getElementById('notificationPopup');
  const bell = document.querySelector('.notification-btn');
  if (popup && bell && !bell.contains(e.target) && !popup.contains(e.target)) {
    popup.classList.remove('active');
  }
});

// Initialize theme
const savedTheme = localStorage.getItem('theme') || 'light';
document.documentElement.setAttribute('data-theme', savedTheme);
if (savedTheme === 'dark') {
  const icon = document.getElementById('themeIcon');
  icon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>';
}

// FAQ Toggle
function toggleFaq(element) {
  const item = element.parentElement;
  const answer = item.querySelector('.faq-answer');
  const isActive = item.classList.contains('active');
  
  // Close all other FAQs
  document.querySelectorAll('.faq-item').forEach(faq => {
    faq.classList.remove('active');
    faq.querySelector('.faq-answer').style.maxHeight = '0';
  });
  
  // Toggle current FAQ
  if (!isActive) {
    item.classList.add('active');
    answer.style.maxHeight = answer.scrollHeight + 'px';
  }
}

// Render Plans
function renderPlans() {
  const grid = document.getElementById('plansGrid');
  grid.innerHTML = '';
  plans.forEach(plan => {
    const card = document.createElement('div');
    card.className = 'plan-card';
    card.onclick = () => window.location.href = 'plan.html';
    card.innerHTML = `
      <div class="plan-icon"><img src="${plan.image}" alt="${plan.name}" /></div>
      <div class="plan-name">${plan.name}</div>
      <div class="plan-price">${plan.totalInvestment}$</div>
      <div class="plan-detail">Daily Profit: ${plan.dailyProfit}$</div>
      <div class="plan-detail">Total Return: ${plan.totalProfit}$</div>
      <div class="plan-detail">${plan.durationDays} Days</div>
    `;
    grid.appendChild(card);
  });
}

// Render Withdrawals
function renderWithdrawals() {
  const list = document.getElementById('withdrawalsList');
  list.innerHTML = '';
  withdrawals.slice(0, 6).forEach((w, index) => {
    const item = document.createElement('div');
    item.className = 'withdrawal-item';
    item.style.animationDelay = `${index * 0.1}s`;
    item.innerHTML = `
      <div class="withdrawal-avatar">${w.user.charAt(0).toUpperCase()}</div>
      <div class="withdrawal-info">
        <div class="withdrawal-email">${w.email}</div>
        <div class="withdrawal-time">Withdrew successfully</div>
      </div>
      <div class="withdrawal-amount">${w.amount}</div>
    `;
    list.appendChild(item);
  });
}

// Load Dashboard
async function loadDashboard() {
  const token = sessionStorage.getItem('token');
  if (!token) {
    window.location.href = 'login.html';
    return;
  }

  try {
    const res = await fetch('/api/auth/dashboard', {
      headers: { 'Authorization': 'Bearer ' + token }
    });
    const result = await res.json();

    if (result.name) {
      // Hide skeleton, show content
      document.getElementById('loadingSkeleton').classList.add('hidden');
      document.getElementById('mainContent').classList.remove('hidden');

      // Update user info
      document.getElementById('userName').textContent = result.name;
      document.getElementById('referralCode').textContent = result.referralCode || '-';
      document.getElementById('referralCount').textContent = result.referralCount || 0;
      document.getElementById('walletBalance').textContent = (result.wallet || 0).toFixed(2);

      // Update plan info
      if (result.activePlan) {
        const startDate = new Date(result.planStartDate || Date.now());
        const expiryDate = new Date(startDate);
        expiryDate.setDate(expiryDate.getDate() + result.activePlan.durationDays);
        
        document.getElementById('planName').textContent = result.activePlan.name;
        document.getElementById('planExpiry').textContent = 'Expires: ' + expiryDate.toLocaleDateString();
        document.getElementById('planStatus').textContent = 'Active';
        document.getElementById('planStatus').className = 'stat-badge active';
        document.getElementById('notificationMessage').textContent = `Your ${result.activePlan.name} plan is active! Keep completing tasks daily.`;
      } else {
        document.getElementById('notificationMessage').textContent = 'Buy a plan to start earning money!';
      }

      // Render plans and withdrawals
      renderPlans();
      renderWithdrawals();
    } else {
      sessionStorage.removeItem('token');
      window.location.href = 'login.html';
    }
  } catch (err) {
    console.error(err);
    // Show content even if API fails (for demo purposes)
    document.getElementById('loadingSkeleton').classList.add('hidden');
    document.getElementById('mainContent').classList.remove('hidden');
    renderPlans();
    renderWithdrawals();
  }
}

// Logout
function logout() {
  if (confirm('Are you sure you want to logout?')) {
    sessionStorage.removeItem('token');
    window.location.href = 'login.html';
  }
}

// Auto-refresh wallet balance
setInterval(async () => {
  const token = sessionStorage.getItem('token');
  if (!token) return;
  try {
    const res = await fetch('/api/auth/dashboard', {
      headers: { 'Authorization': 'Bearer ' + token }
    });
    const result = await res.json();
    if (result.wallet != null) {
      document.getElementById('walletBalance').textContent = result.wallet.toFixed(2);
    }
  } catch (e) {
    console.error(e);
  }
}, 30000);

// Initialize
loadDashboard();
</script>
</body>
</html>